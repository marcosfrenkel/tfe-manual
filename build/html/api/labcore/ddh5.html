

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>DDH5 &mdash; Tools for Experiments Manual  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Instrumentserver API" href="../instrumentserver/index.html" />
    <link rel="prev" title="Base Utils" href="utils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Tools for Experiments Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../plottr/index.html">Plottr’s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labcore/index.html">Labcore’s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../instrumentserver/index.html">Instrumentserver’s Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Index Page</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Labcore API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="measurement/sweep.html">Sweep</a></li>
<li class="toctree-l3"><a class="reference internal" href="measurement/record.html">Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html">Base Utils</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DDH5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description-of-the-hdf5-storage-format">Description of the HDF5 storage format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../instrumentserver/index.html">Instrumentserver API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plottr/index.html">Plottr’s API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples and Guides</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Tools for Experiments Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">API Index Page</a> &raquo;</li>
        
          <li><a href="index.html">Labcore API</a> &raquo;</li>
        
      <li>DDH5</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/api/labcore/ddh5.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-labcore.ddh5">
<span id="ddh5"></span><h1>DDH5<a class="headerlink" href="#module-labcore.ddh5" title="Permalink to this headline">¶</a></h1>
<p>plottr.data.datadict_storage</p>
<p>Provides file-storage tools for the DataDict class.</p>
<section id="description-of-the-hdf5-storage-format">
<h2>Description of the HDF5 storage format<a class="headerlink" href="#description-of-the-hdf5-storage-format" title="Permalink to this headline">¶</a></h2>
<p>We use a simple mapping from DataDict to the HDF5 file. Within the file,
a single DataDict is stored in a (top-level) group of the file.
The data fields are datasets within that group.</p>
<p>Global meta data of the DataDict are attributes of the group; field meta data
are attributes of the dataset (incl., the <cite>unit</cite> and <cite>axes</cite> values). The meta
data keys are given exactly like in the DataDict, i.e., incl the double
underscore pre- and suffix.</p>
<dl class="py class">
<dt class="sig sig-object py" id="labcore.ddh5.AppendMode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">AppendMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/labcore/ddh5.html#AppendMode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.AppendMode" title="Permalink to this definition">¶</a></dt>
<dd><p>How/Whether to append data to existing data.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="labcore.ddh5.AppendMode.all">
<span class="sig-name descname"><span class="pre">all</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#labcore.ddh5.AppendMode.all" title="Permalink to this definition">¶</a></dt>
<dd><p>all data is appended to existing data</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="labcore.ddh5.AppendMode.new">
<span class="sig-name descname"><span class="pre">new</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#labcore.ddh5.AppendMode.new" title="Permalink to this definition">¶</a></dt>
<dd><p>data that is additional compared to already existing data is appended</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="labcore.ddh5.AppendMode.none">
<span class="sig-name descname"><span class="pre">none</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#labcore.ddh5.AppendMode.none" title="Permalink to this definition">¶</a></dt>
<dd><p>data is overwritten</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="labcore.ddh5.DDH5Writer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">DDH5Writer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basedir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../plottr/data.html#plottr.data.datadict.DataDict" title="plottr.data.datadict.DataDict"><span class="pre">plottr.data.datadict.DataDict</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/labcore/ddh5.html#DDH5Writer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.DDH5Writer" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for writing data to DDH5.
Based on typical needs in taking data in an experimental physics lab.</p>
<dl>
<dt>Example usage::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">x</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;x_unit&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;y_unit&#39;</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">... </span><span class="k">with</span> <span class="n">DDH5Writer</span><span class="p">(</span><span class="s1">&#39;./data/&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Test&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">writer</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Data location: ./data/2020-06-05/2020-06-05_0001_Example/2020-06-05_0001_Test.ddh5</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basedir</strong> – The root directory in which data is stored.
<a class="reference internal" href="#labcore.ddh5.DDH5Writer.create_file_structure" title="labcore.ddh5.DDH5Writer.create_file_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_file_structure()</span></code></a> is creating the structure inside this root and
determines the file name of the data. The default structure implemented here is
<code class="docutils literal notranslate"><span class="pre">&lt;root&gt;/YYYY-MM-DD/YYYY-MM-DD_&lt;idx&gt;_&lt;name&gt;/YYYY-MM-DD_&lt;idx&gt;_&lt;name&gt;.ddh5</span></code>,
where &lt;idx&gt; is the automatically increasing number of this dataset in the day
folder and &lt;name&gt; is the value of parameter <cite>name</cite>. To change this, re-implement
<a class="reference internal" href="#labcore.ddh5.DDH5Writer.create_file_structure" title="labcore.ddh5.DDH5Writer.create_file_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_file_structure()</span></code></a>.</p></li>
<li><p><strong>datadict</strong> – initial data object. Must contain at least the structure of the
data to be able to use <a class="reference internal" href="#labcore.ddh5.DDH5Writer.add_data" title="labcore.ddh5.DDH5Writer.add_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_data()</span></code></a> to add data.</p></li>
<li><p><strong>groupname</strong> – name of the top-level group in the file container. An existing
group of that name will be deleted.</p></li>
<li><p><strong>name</strong> – name of this dataset. Used in path/file creation and added as meta data.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="labcore.ddh5.DDH5Writer.add_data">
<span class="sig-name descname"><span class="pre">add_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#DDH5Writer.add_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.DDH5Writer.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add data to the file (and the internal <cite>DataDict</cite>).</p>
<p>Requires one keyword argument per data field in the <cite>DataDict</cite>, with
the key being the name, and value the data to add. It is required that
all added data has the same number of ‘rows’, i.e., the most outer dimension
has to match for data to be inserted faithfully.
If some data is scalar and others are not, then the data should be reshaped
to (1, ) for the scalar data, and (1, …) for the others; in other words,
an outer dimension with length 1 is added for all.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="labcore.ddh5.DDH5Writer.create_file_structure">
<span class="sig-name descname"><span class="pre">create_file_structure</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#DDH5Writer.create_file_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.DDH5Writer.create_file_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the filepath and create all subfolders.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the filepath (without extension) of the data file.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.add_cur_time_attr">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">add_cur_time_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'creation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'__'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'__'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#add_cur_time_attr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.add_cur_time_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Add current time information to the given HDF5 object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.datadict_from_hdf5">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">datadict_from_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startidx</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopidx</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure_only</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_unequal_lengths</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swmr_mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_retries</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_delay</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../plottr/data.html#plottr.data.datadict.DataDict" title="plottr.data.datadict.DataDict"><span class="pre">plottr.data.datadict.DataDict</span></a></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#datadict_from_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.datadict_from_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a DataDict from file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basepath</strong> – full filepath without the file extension</p></li>
<li><p><strong>groupname</strong> – name of hdf5 group</p></li>
<li><p><strong>startidx</strong> – start row</p></li>
<li><p><strong>stopidx</strong> – end row + 1</p></li>
<li><p><strong>structure_only</strong> – if <cite>True</cite>, don’t load the data values</p></li>
<li><p><strong>ignore_unequal_lengths</strong> – if <cite>True</cite>, don’t fail when the rows have
unequal length; will return the longest consistent DataDict possible.</p></li>
<li><p><strong>swmr_mode</strong> – if <cite>True</cite>, open HDF5 file in SWMR mode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>validated DataDict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.datadict_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">datadict_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datadict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../plottr/data.html#plottr.data.datadict.DataDict" title="plottr.data.datadict.DataDict"><span class="pre">plottr.data.datadict.DataDict</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">basepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append_mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#labcore.ddh5.AppendMode" title="labcore.ddh5.AppendMode"><span class="pre">labcore.ddh5.AppendMode</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">AppendMode.new</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swmr_mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#datadict_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.datadict_to_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a DataDict to DDH5</p>
<p>Note: meta data is only written during initial writing of the dataset.
If we’re appending to existing datasets, we’re not setting meta
data anymore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datadict</strong> – datadict to write to disk.</p></li>
<li><p><strong>basepath</strong> – path of the file, without extension.</p></li>
<li><p><strong>groupname</strong> – name of the top level group to store the data in</p></li>
<li><p><strong>append_mode</strong> – <ul>
<li><p><cite>AppendMode.none</cite> : delete and re-create group</p></li>
<li><dl class="simple">
<dt><cite>AppendMode.new</cite><span class="classifier">append rows in the datadict that exceed</span></dt><dd><p>the number of existing rows in the dataset already stored.
Note: we’re not checking for content, only length!</p>
</dd>
</dl>
</li>
<li><p><cite>AppendMode.all</cite> : append all data in datadict to file data sets</p></li>
</ul>
</p></li>
<li><p><strong>swmr_mode</strong> – use HDF5 SWMR mode on the file when appending.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.deh5ify">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">deh5ify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#deh5ify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.deh5ify" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert slightly mangled types back to more handy ones.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.h5ify">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">h5ify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#h5ify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.h5ify" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an object into something that we can assing to an HDF5 attribute.</p>
<p>Performs the following conversions:
- list/array of strings -&gt; numpy chararray of unicode type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – input object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object, converted if necessary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.init_path">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">init_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#init_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.init_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Init a new file.</p>
<p>create the folder structure, if necessary, and the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> – full file path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.run_and_save_sweep">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">run_and_save_sweep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sweep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="measurement/sweep.html#labcore.measurement.sweep.Sweep" title="labcore.measurement.sweep.Sweep"><span class="pre">labcore.measurement.sweep.Sweep</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#run_and_save_sweep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.run_and_save_sweep" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates through a sweep, saving the data coming through it into a file called &lt;name&gt; at &lt;data_dir&gt; directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sweep</strong> – Sweep object to iterate through.</p></li>
<li><p><strong>data_dir</strong> – Directory of file location</p></li>
<li><p><strong>name</strong> – name of the file</p></li>
<li><p><strong>prt</strong> – Bool, if True, the function will print every result coming from the sweep. Default, False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="labcore.ddh5.set_attr">
<span class="sig-prename descclassname"><span class="pre">labcore.ddh5.</span></span><span class="sig-name descname"><span class="pre">set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/labcore/ddh5.html#set_attr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#labcore.ddh5.set_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set attribute <cite>name</cite> of object <cite>h5obj</cite> to <cite>val</cite></p>
<p>Use <a class="reference internal" href="#labcore.ddh5.h5ify" title="labcore.ddh5.h5ify"><code class="xref py py-func docutils literal notranslate"><span class="pre">h5ify()</span></code></a> to convert the object, then try to set the attribute
to the returned value. If that does not succeed due to a HDF5 typing
restriction, set the attribute to the string representation of the value.</p>
</dd></dl>

</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../instrumentserver/index.html" class="btn btn-neutral float-right" title="Instrumentserver API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="utils.html" class="btn btn-neutral float-left" title="Base Utils" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Wolfgang Pfaff, Marcos Frenkel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>