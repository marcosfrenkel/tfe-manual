

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tools for Experiments Overview &mdash; Tools for Experiments Manual  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Files Created by “Tools for Experiments Overview”" href="notebook_out.html" />
    <link rel="prev" title="Examples and Guides" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Tools for Experiments Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../plottr/index.html">Plottr’s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../labcore/index.html">Labcore’s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../instrumentserver/index.html">Instrumentserver’s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Index Page</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Examples and Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#general">General</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tools for Experiments Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#The-instrument-server">The instrument server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Plottr:-data-management-and-inspection">Plottr: data management and inspection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Labcore:-tools-for-increasing-efficiency.">Labcore: tools for increasing efficiency.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="notebook_out.html">Files Created by “Tools for Experiments Overview”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dummy_measurement_without_server/measurement_notebook.html">Dummy Measurement Without Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#labcore">Labcore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#plotrr">Plotrr</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Tools for Experiments Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Examples and Guides</a> &raquo;</li>
        
      <li>Tools for Experiments Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/examples/general/toolsforexperiments_overview/tfe_overview.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Tools-for-Experiments-Overview">
<h1>Tools for Experiments Overview<a class="headerlink" href="#Tools-for-Experiments-Overview" title="Permalink to this headline">¶</a></h1>
<section id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h2>
<p>This notebook is aiming to broadly introduce all the major components of the toolsforexperiments suite. the document is currently still work in progress, but already a decent starting point for a few things.</p>
<ul class="simple">
<li><p>Prerequisites:</p>
<ul>
<li><p>you should know the qcodes basics</p></li>
<li><p>have a look at the ‘dummy_measurement_without_server’ example before</p></li>
</ul>
</li>
</ul>
</section>
<section id="Imports">
<h2>Imports<a class="headerlink" href="#Imports" title="Permalink to this headline">¶</a></h2>
<p>We need to have some common packages installed, and also need qcodes and plottr. Refer to the official qcodes documentation for how to set up the right environment.</p>
<p>Plottr can be installed from pip or conda, or from github.</p>
<p>instrumentserver needs to be installed from github (and preferably using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">h5py</span>

<span class="kn">from</span> <span class="nn">qcodes</span> <span class="kn">import</span> <span class="n">Instrument</span><span class="p">,</span> <span class="n">Station</span><span class="p">,</span> <span class="n">find_or_create_instrument</span>
<span class="kn">from</span> <span class="nn">plottr.data</span> <span class="kn">import</span> <span class="n">datadict_storage</span> <span class="k">as</span> <span class="n">dds</span><span class="p">,</span> <span class="n">datadict</span> <span class="k">as</span> <span class="n">dd</span>


<span class="kn">from</span> <span class="nn">labcore.measurement</span> <span class="kn">import</span> <span class="o">*</span>

</pre></div>
</div>
</div>
</section>
<section id="The-instrument-server">
<h2>The instrument server<a class="headerlink" href="#The-instrument-server" title="Permalink to this headline">¶</a></h2>
<p>The role of the instrument server is to manage access to instruments (both real and virtual), so they can be used from multiple processes. It’s not strictly necessary to use it, and its designed such that using instruments through the server can be used also to talk to instruments that are instantiated directly.</p>
<p>Start the instrumentserver from the commandline (in an env’t that has qcodes and the instrumentserver package installed) in a directory that will be the working directory for the server.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ instrumentserver --gui True
</pre></div>
</div>
<p>Because no instruments are instantiated at this point, we get an empty window reflecting the blank qcodes station living inside the server. We can already create a client in this notebook that connects to the instrumentserver:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">instrumentserver.client</span> <span class="kn">import</span> <span class="n">Client</span> <span class="k">as</span> <span class="n">InstrumentClient</span>
<span class="n">cli</span> <span class="o">=</span> <span class="n">InstrumentClient</span><span class="p">()</span> <span class="c1"># connect to default host (localhost) and default port (5555)</span>
</pre></div>
</div>
</div>
<p>We will now see how we can make use of the fact that we can talk to the instrumentserver from multiple processes. We’ll create a virtual instrument (something with no direct counterpart on the hardware side) that allows us to manage arbitrary experiment parameters that we can access across the setup (a fancy way to keep track of important variables). After that, we’ll set up some dummy instruments and perform some fake data acquisition with them.</p>
<section id="Parameter-manager">
<h3>Parameter manager<a class="headerlink" href="#Parameter-manager" title="Permalink to this headline">¶</a></h3>
<p>We’ll first launch the <em>parameter manager</em>. Because it has a dedicated GUI we run it as a standalone program. From a command line prompt we can launch it separately (again, make sure to do this within an env’t that has the instrumentserver package installed):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ instrumentserver-param-manager
</pre></div>
</div>
<p>We’ll simply get an empty window now. The bottom of the window allows us to add arbitrary parameters and values, where dots serve as hierarchy separators (like objects and their children in python). Let’s add a few parameters, let’s say <code class="docutils literal notranslate"><span class="pre">qubit.frequency</span></code>, <code class="docutils literal notranslate"><span class="pre">qubit.pipulse.len</span></code>, <code class="docutils literal notranslate"><span class="pre">qubit.pipulse.amp</span></code> and give them some arbitrary values. We’ll see something like this:</p>
<img alt="Parameter manager window" src="../../../_images/parammgr.png" />
<p>Because parameters live in the instrumentserver we can access the values here by creating a ‘Proxy’ instrument that forwards all requests to the ‘real’ instrument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">params</span> <span class="o">=</span> <span class="n">cli</span><span class="o">.</span><span class="n">get_instrument</span><span class="p">(</span><span class="s1">&#39;parameter_manager&#39;</span><span class="p">)</span> <span class="c1"># &#39;parameter-=_manager&#39; is the name the startup script gives the instrument by default</span>

<span class="c1"># simply output the value of the pi pulse length:</span>
<span class="n">params</span><span class="o">.</span><span class="n">qubit</span><span class="o">.</span><span class="n">pipulse</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
40
</pre></div></div>
</div>
<p>The different clients (such as the one in the notebook kernel and the one of the GUI) should stay in sync automatically. If we update a value from there, the GUI will display the change right away. In turn, calling a parameter get function should always return the most recent value the server has.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># after executing, the change is immediately visible in the GUI.</span>
<span class="n">params</span><span class="o">.</span><span class="n">qubit</span><span class="o">.</span><span class="n">pipulse</span><span class="o">.</span><span class="n">len</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># if we change the value in the GUI, this will return the new value.</span>
<span class="n">params</span><span class="o">.</span><span class="n">qubit</span><span class="o">.</span><span class="n">pipulse</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
100
</pre></div></div>
</div>
<p>The same goes for adding new parameters after all clients are connected. We can add new parameters very easily from any client. The GUI should update automatically once we add something here.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># this will only be available in the GUI after pressing the refresh button.</span>
<span class="n">params</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;qubit.anharmonicity&#39;</span><span class="p">,</span> <span class="n">initial_value</span><span class="o">=-</span><span class="mf">150.0</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;MHz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If we add a parameter in the instrument GUI (let’s say: <code class="docutils literal notranslate"><span class="pre">resonator.frequency</span></code>), we can immediately access it from within the notebook. Note, however, that autocomplete will not work right away (the client in the notebook needs to refresh, which only happens once we try to execute the command).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">params</span><span class="o">.</span><span class="n">resonator</span><span class="o">.</span><span class="n">frequency</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">~\AppData\Local\Temp/ipykernel_15664/1897080992.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>params<span class="ansi-yellow-intense-fg ansi-bold">.</span>resonator<span class="ansi-yellow-intense-fg ansi-bold">.</span>frequency<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\msmt\documents\github\instrumentserver\instrumentserver\client\proxy.py</span> in <span class="ansi-cyan-fg">__getattr__</span><span class="ansi-blue-intense-fg ansi-bold">(self, item)</span>
<span class="ansi-green-fg">    337</span>                 <span class="ansi-green-intense-fg ansi-bold">return</span> getattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> item<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    338</span>             <span class="ansi-green-intense-fg ansi-bold">else</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 339</span><span class="ansi-yellow-intense-fg ansi-bold">                 </span><span class="ansi-green-intense-fg ansi-bold">raise</span> e
<span class="ansi-green-fg">    340</span>
<span class="ansi-green-fg">    341</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\msmt\documents\github\instrumentserver\instrumentserver\client\proxy.py</span> in <span class="ansi-cyan-fg">__getattr__</span><span class="ansi-blue-intense-fg ansi-bold">(self, item)</span>
<span class="ansi-green-fg">    325</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> __getattr__<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> item<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    326</span>         <span class="ansi-green-intense-fg ansi-bold">try</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 327</span><span class="ansi-yellow-intense-fg ansi-bold">             </span><span class="ansi-green-intense-fg ansi-bold">return</span> super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__getattr__<span class="ansi-yellow-intense-fg ansi-bold">(</span>item<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    328</span>         <span class="ansi-green-intense-fg ansi-bold">except</span> Exception <span class="ansi-green-intense-fg ansi-bold">as</span> e<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    329</span>             current_bp <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>cli<span class="ansi-yellow-intense-fg ansi-bold">.</span>getBluePrint<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>remotePath<span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">~\Miniconda3\envs\qcodes\lib\site-packages\qcodes\utils\helpers.py</span> in <span class="ansi-cyan-fg">__getattr__</span><span class="ansi-blue-intense-fg ansi-bold">(self, key)</span>
<span class="ansi-green-fg">    432</span>                 <span class="ansi-green-intense-fg ansi-bold">pass</span>
<span class="ansi-green-fg">    433</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 434</span><span class="ansi-yellow-intense-fg ansi-bold">         raise AttributeError(
</span><span class="ansi-green-fg">    435</span>             &#34;&#39;{}&#39; object and its delegates have no attribute &#39;{}&#39;&#34;.format(
<span class="ansi-green-fg">    436</span>                 self.__class__.__name__, key))

<span class="ansi-red-intense-fg ansi-bold">AttributeError</span>: &#39;ProxyInstrumentModule&#39; object and its delegates have no attribute &#39;resonator&#39;
</pre></div></div>
</div>
<p>We can also remove parameters directly from the code:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">params</span><span class="o">.</span><span class="n">remove_parameter</span><span class="p">(</span><span class="s1">&#39;qubit.pipulse.len&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>After runnning this line we can see that the paremeter disappeared from the parameter manager.</p>
</section>
<section id="Adding-instruments-to-the-server">
<h3>Adding instruments to the server<a class="headerlink" href="#Adding-instruments-to-the-server" title="Permalink to this headline">¶</a></h3>
<p>When using ‘vanilla’ qcodes, we would simply create a qcodes station in our working kernel, then add instruments by instantiating the corresponding driver classes. When using the instrumentserver to manage our instrument instances, we instead want to instantiate inside the station that the server runs.</p>
<p>As an example, we will add a dummy instrument that behaves like a vector network analyzer and simulates a resonator response. Only the server will instantiate it, so instead of importing the driver, we pass the import path (of course, needs to be known in the environment that the server is running in).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">vna</span> <span class="o">=</span> <span class="n">cli</span><span class="o">.</span><span class="n">create_instrument</span><span class="p">(</span>
    <span class="s1">&#39;instrumentserver.testing.dummy_instruments.rf.ResonatorResponse&#39;</span><span class="p">,</span> <span class="c1"># the path to the driver; must be importable for the server program.</span>
    <span class="s1">&#39;vna&#39;</span><span class="p">,</span>  <span class="c1"># this is the name of the instrument in the server station</span>
    <span class="n">f0</span><span class="o">=</span><span class="mf">6.789e9</span><span class="p">,</span>  <span class="c1"># the resonance frequency of the mock resonator</span>
    <span class="n">df</span><span class="o">=</span><span class="mf">10e6</span><span class="p">,</span>  <span class="c1"># the linewidth</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># setting some reasonable values</span>
<span class="n">vna</span><span class="o">.</span><span class="n">start_frequency</span><span class="p">(</span><span class="mf">6.089e9</span><span class="p">)</span>
<span class="n">vna</span><span class="o">.</span><span class="n">stop_frequency</span><span class="p">(</span><span class="mf">7.089e9</span><span class="p">)</span>
<span class="n">vna</span><span class="o">.</span><span class="n">npoints</span><span class="p">(</span><span class="mi">1201</span><span class="p">)</span>
<span class="n">vna</span><span class="o">.</span><span class="n">bandwidth</span><span class="p">(</span><span class="mf">1e4</span><span class="p">)</span>
<span class="n">vna</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Using-the-parameter-manager-in-measurements">
<h3>Using the parameter manager in measurements<a class="headerlink" href="#Using-the-parameter-manager-in-measurements" title="Permalink to this headline">¶</a></h3>
<p>Refer to <a class="reference external" href="https://github.com/toolsforexperiments/recipes/blob/master/dummy_measurement_without_server/measurement_notebook.ipynb">measurement_notebook</a> for a more in depth guide example of the measurement we are taking.</p>
<p>The idea here is simple: by using parameters from the parameter manager we don’t need to store configuration variables in measurement scripts, and can run functions using user-changeable parameters without having to pass variables. We illustrate this with an artificial, but also not too unrealistic dummy case: Assume we often want to sweep a flux (for instance for tuning a resonator) a small range around a given setpoint that can change. Not having to keep track of that setpoint throughout
scripts can make life a bit easier (and will hopefully lead to fewer mistakes).</p>
<p>First, lets instantiate the virtual flux controller, and define the measurement function:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fluxctrl</span> <span class="o">=</span> <span class="n">cli</span><span class="o">.</span><span class="n">create_instrument</span><span class="p">(</span>
    <span class="n">instrument_class</span><span class="o">=</span><span class="s1">&#39;instrumentserver.testing.dummy_instruments.rf.FluxControl&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;fluxctrl&#39;</span><span class="p">,</span>
    <span class="n">resonator_instrument</span><span class="o">=</span><span class="s1">&#39;vna&#39;</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">sweep_flux</span><span class="p">(</span><span class="n">sweep_range</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">nsteps</span><span class="o">=</span><span class="mi">51</span><span class="p">):</span>
    <span class="n">flux</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">s11</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="n">vna</span><span class="o">.</span><span class="n">resonator_linewidth</span><span class="p">(</span><span class="mf">10e6</span><span class="p">)</span>
    <span class="n">vna</span><span class="o">.</span><span class="n">resonator_frequency</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">resonator</span><span class="o">.</span><span class="n">frequency</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e9</span><span class="p">)</span>
    <span class="n">f0</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">resonator</span><span class="o">.</span><span class="n">flux</span><span class="p">()</span><span class="o">-</span><span class="n">sweep_range</span><span class="o">/</span><span class="mf">2.</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">resonator</span><span class="o">.</span><span class="n">flux</span><span class="p">()</span><span class="o">+</span><span class="n">sweep_range</span><span class="o">/</span><span class="mf">2.</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">nsteps</span><span class="p">):</span>
        <span class="n">fluxctrl</span><span class="o">.</span><span class="n">flux</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">flux</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">frequency</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vna</span><span class="o">.</span><span class="n">frequency</span><span class="p">())</span>
        <span class="n">s11</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vna</span><span class="o">.</span><span class="n">data</span><span class="p">())</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">s11</span><span class="p">)),</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span>
              <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">frequency</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">frequency</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">f0</span><span class="p">,</span> <span class="n">f1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Let’s add the parameter we want to control, <code class="docutils literal notranslate"><span class="pre">resonator.flux</span></code>, via the GUI. After that we can measure by setting parameters in the GUI, rather than typing them explicitly.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># change resonator frequency or flux in the gui, and re-run to see the change.</span>
<span class="n">sweep_flux</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_general_toolsforexperiments_overview_tfe_overview_28_0.png" src="../../../_images/examples_general_toolsforexperiments_overview_tfe_overview_28_0.png" />
</div>
</div>
<p>It is of course clear that in such a simple experiment the Parameter Manager GUI provides only a limited amount of benefit. However, once parameters are used across many different measurements, it can be very convenient to have it act as the central “single source of truth”.</p>
</section>
<section id="Saving-and-recalling-the-state-of-the-setup">
<h3>Saving and recalling the state of the setup<a class="headerlink" href="#Saving-and-recalling-the-state-of-the-setup" title="Permalink to this headline">¶</a></h3>
<p>Saving all current parameters in the instrumentserver to a file:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cli</span><span class="o">.</span><span class="n">paramsToFile</span><span class="p">(</span><span class="s1">&#39;parameters.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can also save the state by pressing the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">to</span> <span class="pre">file</span></code> button in the top left of server GUI. We can also utilize the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">parameters</span> <span class="pre">to</span> <span class="pre">file</span></code> button from the parameter manager GUI to only save the parameters of the manager and not the entire state of the station.</p>
<p>By default <code class="docutils literal notranslate"><span class="pre">paramsToFile</span></code> saves only the name and value of a parameter, but we can also save units, for example:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cli</span><span class="o">.</span><span class="n">paramsToFile</span><span class="p">(</span><span class="s1">&#39;parameters-with-units.json&#39;</span><span class="p">,</span> <span class="n">instrument</span><span class="o">=</span><span class="s1">&#39;parameter_manager&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Loading works similar:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cli</span><span class="o">.</span><span class="n">paramsFromFile</span><span class="p">(</span><span class="s1">&#39;parameters.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can save and recall also from the GUI. The instrumentserver GUI allows saving/loading the state of all instruments using a default file in the working directory (<code class="docutils literal notranslate"><span class="pre">parameters.json</span></code>). For more control we can use the API as shown above.</p>
<p>In addition, the parameter manager GUI also allows saving/restoring all its parameters from the GUI. It saves to a separate file in the current working directory from where the parameter manager was launched (<code class="docutils literal notranslate"><span class="pre">parameter_manager-&lt;name_of_instrument&gt;.json</span></code>) and includes the units.</p>
</section>
<section id="Logger-and-Dashboard">
<h3>Logger and Dashboard<a class="headerlink" href="#Logger-and-Dashboard" title="Permalink to this headline">¶</a></h3>
<p>Mention the logger and dashboard and what do they do and link to their particular guide</p>
</section>
</section>
<section id="Plottr:-data-management-and-inspection">
<h2>Plottr: data management and inspection<a class="headerlink" href="#Plottr:-data-management-and-inspection" title="Permalink to this headline">¶</a></h2>
<p>Work in progress :)</p>
<p>For now, please check these resources:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/toolsforexperiments/recipes/blob/master/dummy_measurement_without_server/measurement_notebook.ipynb">Simple Measurement example</a> - “dummy_measurement_without_server” example notebook</p></li>
<li><p><a class="reference external" href="https://qcodes.github.io/Qcodes/examples/plotting/How-to-use-Plottr-with-QCoDeS-for-live-plotting.html">Using plottr with qcodes</a></p></li>
</ul>
<section id="General-introduction">
<h3>General introduction<a class="headerlink" href="#General-introduction" title="Permalink to this headline">¶</a></h3>
<p>What plottr is and what does it do</p>
</section>
<section id="Simple-Example-on-how-to-save-data">
<h3>Simple Example on how to save data<a class="headerlink" href="#Simple-Example-on-how-to-save-data" title="Permalink to this headline">¶</a></h3>
<p>In the following example we show to firstly declare the structure and metadata of the <code class="docutils literal notranslate"><span class="pre">DataDict</span></code>, in this case we have two independent variabels (<code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>) and a dependent variable (<code class="docutils literal notranslate"><span class="pre">z</span></code>) that depends on both of them.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Declaring the structure of the DataDict.</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">DataDict</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">),</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">),</span>
    <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]),</span>
<span class="p">)</span>

<span class="c1"># We declare a few parameters used in the measurement</span>
<span class="n">nrows</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;Example data&quot;</span>
<span class="n">DATADIR</span> <span class="o">=</span> <span class="s1">&#39;./data&#39;</span>

<span class="c1"># we start the context manager.</span>
<span class="k">with</span> <span class="n">dds</span><span class="o">.</span><span class="n">DDH5Writer</span><span class="p">(</span><span class="n">basedir</span><span class="o">=</span><span class="n">DATADIR</span><span class="p">,</span> <span class="n">datadict</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">file_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nrows</span><span class="p">):</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">n</span><span class="p">],</span>
                        <span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                        <span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                        <span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Data location:  ./data\2021-08-24\2021-08-24T145522_37baa9c5-Example data\data.ddh5
</pre></div></div>
</div>
</section>
<section id="How-to-open-and-plot-data.">
<h3>How to open and plot data.<a class="headerlink" href="#How-to-open-and-plot-data." title="Permalink to this headline">¶</a></h3>
<p>Running the command,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ plottr-monitr .<span class="se">\d</span>ata
</pre></div>
</div>
<p>opens the monitr window inside the newly created data folder.Inside we can find all of the different measurements that are stored there labeled by day. If we go through the folder tree up to the DDH5 file created by the previous meausrement, on the right we will be able to see the metadata, which variable depends on what, the nuber of datapoints for each, etc) of our stored data.</p>
<img alt="Monitr main window" src="../../../_images/monitr_menu.png" />
<p>Doing a right click on data in the right window will open a popup saying “Plot data”.</p>
<img alt="Selecting plot data" src="../../../_images/selecting_plot_data.png" />
<p>By clicking on it, a new inspectr window opens up with a plot of the selected data. The window is by defualt divided into three different section. Bottom one being the plotted data. In it we can move around the data and zoom in and out of it. In the data selection window (top left) we can select which variable we want to plot in the case we have multiple variables in a single DDH5 file. In the dimension assignment window (top right) we can indicate what the independent varaibles should be in the
plot (x or y axis, if we want them averaged, if we want to select a specific one, etc.).</p>
<img alt="Inspectr window" src="../../../_images/inspectr.png" />
</section>
<section id="How-to-view-real-time-data.">
<h3>How to view real time data.<a class="headerlink" href="#How-to-view-real-time-data." title="Permalink to this headline">¶</a></h3>
<p>To plot real time data we simply need to open the DDH5 file while the measurement is being executed and inspctr will update periodically every two seconds (you can specify this inverval of time in the ‘Refresh interval’ textbox in the toolbar.</p>
</section>
<section id="Nodes-and-Flowcharts">
<h3>Nodes and Flowcharts<a class="headerlink" href="#Nodes-and-Flowcharts" title="Permalink to this headline">¶</a></h3>
<p>More advanced functionality for plottr can be created to spcify and automate analisys of data. To learn how to utilize it visit the <a class="reference internal" href="../../../plottr/concepts/nodes.html"><span class="doc">plottr documentation</span></a>.</p>
</section>
</section>
<section id="Labcore:-tools-for-increasing-efficiency.">
<h2>Labcore: tools for increasing efficiency.<a class="headerlink" href="#Labcore:-tools-for-increasing-efficiency." title="Permalink to this headline">¶</a></h2>
<section id="What-is-a-sweep.">
<h3>What is a sweep.<a class="headerlink" href="#What-is-a-sweep." title="Permalink to this headline">¶</a></h3>
<p>This is a very simple overview of what labcore does, for more information see <a class="reference internal" href="../../labcore/Introduction_to_sweeping.html"><span class="doc">Sweep introduction</span></a>.</p>
<p>Labcore is a tool that allows us to build end execute measurments in a simple and modular way. It does this by constructing a software object, the sweep, before anything gets executed. The sweep containes all the instructions on what to do and the structure of the data coming out it. This way one can plan and get information out of this object before anything happens. The construction of these sweep objects are extremely modular and flexible, allowing for an easy way re-using older code for
specific tasks.</p>
<p>A sweep is an iterable, where each step in the iteration the sweep performs an action and returns some data, this data is in the form of a python dictionary and we call it <strong>record</strong>.</p>
</section>
<section id="How-to-construct-and-run-a-simple-sweep.">
<h3>How to construct and run a simple sweep.<a class="headerlink" href="#How-to-construct-and-run-a-simple-sweep." title="Permalink to this headline">¶</a></h3>
<p>we construct a sweep out of parameters we want to sweep through and actions (usually functions) that need to happen in the measurement. This functions need to be annotated at some point to indicate what is the data that they produce. This can be done either by adding the decorator <a class="reference internal" href="../../../api/labcore/measurement/record.html#labcore.measurement.record.recording"><span class="std std-ref">recording</span></a> to a function that generates data or using the method
<a class="reference internal" href="../../../api/labcore/measurement/record.html#labcore.measurement.record.record_as"><span class="std std-ref">record_as</span></a> when creating the sweep object.</p>
<p>In the following example we create a very simple sweep. Here we seep through the first item in the Sweep, (a veriable going from 0 to 4 created by the range funciton), and we first call func_1 passing the value of the variable as an arguement followed by func_2 again using the same value of the variable as an argument. For demonstration porpuses we use both the recording decorator and the record_as method to record the variables comming out of the functions.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nd">@recording</span><span class="p">(</span>
    <span class="n">independent</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;scalar&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">func_1</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>

<span class="k">def</span> <span class="nf">func_2</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span>

<span class="n">sweep_object</span> <span class="o">=</span> <span class="n">Sweep</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">func_1</span><span class="p">,</span> <span class="n">record_as</span><span class="p">(</span><span class="n">func_2</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">))</span>

</pre></div>
</div>
</div>
<p>We can print the sweep object to see what it will do as well as seeing what data is going to generate.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">sweep_object</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
range(0, 5) &gt;&gt; func_1(i) as {x} &gt;&gt; func_2(i) as {y}
==&gt; {x, y}
</pre></div></div>
</div>
<p>To execute a sweep we simply iterate through it inside a for loop.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sweep_object</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;x&#39;: 1, &#39;y&#39;: 0}
{&#39;x&#39;: 2, &#39;y&#39;: 2}
{&#39;x&#39;: 3, &#39;y&#39;: 4}
{&#39;x&#39;: 4, &#39;y&#39;: 6}
{&#39;x&#39;: 5, &#39;y&#39;: 8}
</pre></div></div>
</div>
</section>
<section id="Constructing-a-more-complicated-sweep.">
<h3>Constructing a more complicated sweep.<a class="headerlink" href="#Constructing-a-more-complicated-sweep." title="Permalink to this headline">¶</a></h3>
<p>Going a little bit deeper, this example follows a more realistic use-case</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">tune_something</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;adjusting something in-situ using param=</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nd">@recording</span><span class="p">(</span>
    <span class="n">independent</span><span class="p">(</span><span class="s1">&#39;frq&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">),</span>
    <span class="n">dependent</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">depends_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;frq&#39;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;rad&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">measure_frequency_trace</span><span class="p">(</span><span class="n">npoints</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">npoints</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mf">1e6</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">npoints</span><span class="p">)</span>


<span class="nd">@recording</span><span class="p">(</span><span class="n">dependent</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">measure_temperature</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sweep</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sweep_parameter</span><span class="p">(</span><span class="s1">&#39;repetition&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
    <span class="o">@</span> <span class="p">(</span><span class="n">sweep_parameter</span><span class="p">(</span><span class="s1">&#39;param&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">tune_something</span><span class="p">)</span>
       <span class="o">*</span> <span class="n">measure_frequency_trace</span>
       <span class="o">+</span> <span class="n">measure_temperature</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">pprint</span><span class="p">(</span><span class="n">sweep</span><span class="o">.</span><span class="n">get_data_specs</span><span class="p">())</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(repetition, param, frq, phase(repetition, param, frq), temperature(repetition))

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sweep</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
adjusting something in-situ using param=0
{&#39;repetition&#39;: 0, &#39;param&#39;: 0, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([-0.95051563,  0.39677113,  0.82798483]), &#39;temperature&#39;: None}
adjusting something in-situ using param=1
{&#39;repetition&#39;: 0, &#39;param&#39;: 1, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([ 0.57891758, -0.44138767,  0.40250355]), &#39;temperature&#39;: None}
adjusting something in-situ using param=2
{&#39;repetition&#39;: 0, &#39;param&#39;: 2, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([ 0.19347455, -0.89869758, -0.50722658]), &#39;temperature&#39;: None}
{&#39;repetition&#39;: 0, &#39;param&#39;: None, &#39;frq&#39;: None, &#39;phase&#39;: None, &#39;temperature&#39;: 0.09624945608152288}
adjusting something in-situ using param=0
{&#39;repetition&#39;: 1, &#39;param&#39;: 0, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([ 0.32768119,  0.79986157, -0.4851257 ]), &#39;temperature&#39;: None}
adjusting something in-situ using param=1
{&#39;repetition&#39;: 1, &#39;param&#39;: 1, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([ 0.79821246,  0.55601409, -1.64250091]), &#39;temperature&#39;: None}
adjusting something in-situ using param=2
{&#39;repetition&#39;: 1, &#39;param&#39;: 2, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([-0.4339752 ,  1.03581369,  0.42389619]), &#39;temperature&#39;: None}
{&#39;repetition&#39;: 1, &#39;param&#39;: None, &#39;frq&#39;: None, &#39;phase&#39;: None, &#39;temperature&#39;: 0.11039824711033963}
adjusting something in-situ using param=0
{&#39;repetition&#39;: 2, &#39;param&#39;: 0, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([-1.21174606, -1.24159865, -0.05330533]), &#39;temperature&#39;: None}
adjusting something in-situ using param=1
{&#39;repetition&#39;: 2, &#39;param&#39;: 1, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([ 0.21372515,  0.13635877, -0.32121778]), &#39;temperature&#39;: None}
adjusting something in-situ using param=2
{&#39;repetition&#39;: 2, &#39;param&#39;: 2, &#39;frq&#39;: array([1000000., 2000000., 3000000.]), &#39;phase&#39;: array([-0.46450743,  1.70461855,  0.95778301]), &#39;temperature&#39;: None}
{&#39;repetition&#39;: 2, &#39;param&#39;: None, &#39;frq&#39;: None, &#39;phase&#39;: None, &#39;temperature&#39;: 0.09687267860477546}
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</section>
<section id="Example-using-sweep-and-saving-data.">
<h3>Example using sweep and saving data.<a class="headerlink" href="#Example-using-sweep-and-saving-data." title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="notebook_out.html" class="btn btn-neutral float-right" title="Files Created by “Tools for Experiments Overview”" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../../index.html" class="btn btn-neutral float-left" title="Examples and Guides" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Wolfgang Pfaff, Marcos Frenkel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>